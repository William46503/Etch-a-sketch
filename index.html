<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Etch-A-Sketch</title>
</head>
<body>
    <div class="main">
        <section class="settingPanel">
            <h1 class="settingPanelTitle">Settings & Options</h1>
            <div class="colorSetting">
                <h2>In progress</h2>
            </div>
            <div class="canvasSizeInput">
                <input type="number" min='2' max='100' class="sizeInputField widthInput" placeholder="Canvas Width" id="canvasWidth"   onchange="{console.log(document.getElementById('canvasWidth').value)}" />
                <span class="X">&#10006;</span>
                <input type="number" min='2' max='100'  class="sizeInputField heightInput" placeholder="Canvas Height" id="canvasHeight" onchange="{console.log(document.getElementById('canvasHeight').value)}"/>
            </div>
            <button class="clearButton button" onclick="resetCanvasColor()">Clear Canvas</button>
            <button class="newCanvasButton button" onclick="generateNewCanvas(document.getElementById('canvasWidth').value, document.getElementById('canvasHeight').value)">Generate Canvas</button>
        </section>
        <section class="canvasMainContainer"><div id="canvasContainer" class=" grid-container"></div></section>
    </div>
    
   
    <script>
        const container = document.getElementById("canvasContainer");
        var canvasCurrentWidth = 16;
        var canvasCurrentHeight = 16;

        //Generate random number within rga value
        function randomNum() {
            return Math.floor(Math.random() * 256);
         }

         function randomRGB() {
            var red = randomNum();
            var green = randomNum();
            var blue = randomNum();
            return [red,green,blue];
        }    

        //generate a new canvas and rewrite the current remembered Width and Height for other usage
        function generateNewCanvas(newWidth, newHeight){
            container.querySelectorAll("div").forEach(item => item.remove());
            canvasCurrentWidth = newWidth;
            canvasCurrentHeight = newHeight;
            generateCanvas(canvasCurrentWidth, canvasCurrentHeight);
        }
        
        //Reset the canvas by generate a new canvas with the current memoried width and height
        function resetCanvasColor(){
            generateNewCanvas(canvasCurrentWidth, canvasCurrentHeight);
            console.log("canvas reset is pressed");
        }

        function generateCanvas(width, height) {
            var canvasArea = width * height;
            document.getElementById("canvasContainer").style.gridTemplateColumns = "repeat(" + width + ", auto)";
            document.getElementById("canvasContainer").style.gridTemplateRows = "repeat(" + height + ", auto)";

            for (let i = 0; i < canvasArea; i++) {
            var newCell = document.createElement('div');
            newCell.className = "grid-item";   

            newCell.addEventListener("mouseover", (e) =>{
                // Returns an array of 3 new values for rgb
                var newrgbVals = randomRGB();
                // Store an new array of values for rgb
                var rgbVals = newrgbVals;
                e.target.style.backgroundColor= ('rgb(' + rgbVals[0] + ',' + rgbVals[1] + ',' +  rgbVals[2] + ')');
            
            });

            container.appendChild(newCell);
        }
        }
       
        //default canvas on refresh
       generateCanvas(canvasCurrentWidth, canvasCurrentHeight);
    </script>
</body>
</html>